# 25. 01. 22

## Team Project (EatPlatFrom) 작업 진행

### STROE_ADDRESS, MENU 테이블 STORE_ID FK 지정

* 해당 컬럼을 STORE 테이블의 STORE_ID를 참조하도록 지정
* Cascade 설정하여 종속적 삭제 설정 완료.

### store/map 구현

1) 페이지 로드, 스크롤, 페이징 버튼 클릭 시 해당 데이터의 주소에 마커 표시 잉여 리소스 제거
2) 마커, 리스트의 데이터를 클릭 시 가게 정보가 출력되는 오버레이 표시 및 이전 리소스 제거

```
해당 작업을 진행하면서 제일 문제였던 점은
카카오 API에서 지원하는 overlay는 일반적으로 해당 블록 스코프 밖에서는
접근이 안된다는 점이었다.
이 점 때문에
각 마커의 오버레이가 이상한 마커에 출력된다던가,
스크롤 데이터 로드 시에 갯수가 이상하게 출력된다던지,
리스트, 마커의 스코프가 달라 마커/오버레이를 초기화 시킬 수 없다든지
각종 에러 요소를 해결하느라 시간을 꽤나 많이 쓴 것 같다.

최종적으로 선택한 방법은
마커가 표시될 때 마커의 정보를 배열(markers)에 추가하여 관리하고
스크롤 시에는 일방적인 데이터 추가만 처리하고
페이징 버튼을 클릭할 경우 markers의 데이터를 초기화 후에
로드 되는 데이터로 덮어씌우는 방법을 사용하여 마커를 관리하였고.

오버레이 같은 경우는 마커가 생성될 당시에 같이 생성된 후에
오버레이 생성 시에 storeId와 관련된 ID를 부여하고
전체는 오버레이의 클래스로,
각 개체의 컨트롤은 해당 ID로 컨트롤 하는 방법으로 변경하였다.

물론 API 자체에 미숙한 부분도 크겠지만
오히려 평소에 자주 사용했던 방식으로 풀어냈다는게
조금 더 의미있지 않았을까.
```